<!DOCTYPE html>
<html class="ov-hidden">
<head>
  <title>Codetmp7</title>
  <meta charset='utf-8'/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
  <meta content="Temporary web app online code editor" name="Description"/>
  <meta content="Temporary web app online code editor" property="og:description"/>
  <meta content="Codetmp" property="og:title"/>
  <meta content="notranslate" name="google"/>
  <meta content="assets/images/192.png" property="og:image"/>
  <link rel="manifest" href="manifest.json"/>
  <link rel="apple-touch-icon" sizes="128x128" href="assets/images/128ap.png">
  <link rel="shortcut icon" sizes="16x16" type='image/x-icon' href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIElEQVQ4T2NkYGD4D8RkA8ZRAxhGw4BhNAyA+WAYpAMATk4QAVU91ZsAAAAASUVORK5CYII=">
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/widgets.css"/>
  <link rel="stylesheet" href="css/app.css"/>
  <link rel="stylesheet" href="css/file-tree.css"/>
  <!-- <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Round" rel="stylesheet"> -->
</head>
<body class="bg5" data-view-group="feat features-cloud" data-view-states="">
  
  <div style="padding:4px 6px;background:dodgerblue;color:white;font-size:0.9rem;">
    <span>The domain codetmp7.dev will expire on April 7, 2025. The service will temporarily shut down then as I seek a new long-term, cost-free solution.</span>
    <button onclick="this.parentElement.remove()">Close</button>
  </div>

  <style id="preload-material">.material-icons{max-width:37.5px;overflow:hidden;color:transparent}</style>

  <div id="main-editor">
    <div class="w3-rest pos-relative h-100">
      <div id="in-home" class="in-window in-content col1 active">
        <div style="top:0;left:0;overflow:auto;z-index:2;" class="w-100 h-100 absolute">
          <div class="w3-hide-small" style="height:34px;"></div>
          
          <div class="w3-padding homepage-content">
            <div>
              <h3 style="font-weight:bold;margin-bottom: 0">Codetmp7</h3>
              <p>Web IDE for serverless static web development (<a href="https://github.com/tmpmachine/divless-html" style="text-decoration:underline;">Divless-HTML</a>, HTML, CSS, and JS).</p>
              <p>
                <input id="check-show-homepage" class="w3-check" type="checkbox" checked oninput="ui.ToggleHomepageSetting()"/> <label for="check-show-homepage">Show homepage first</label>
              </p>
              <button class="d-block" data-onclick="toggle-homepage">
                Start Coding
              </button>
              <div style="height:1rem"></div>
              <div class="w3-button w3-border d-block w3-hide" style="text-align: center;background: #009688;color:#fff;max-width: 300px" id="buttonInstall">
                <div class="w3-small w3-padding-small" style="font-weight:bold;">Install Codetmp</div>
              </div>
              <div style="height:12px"></div>
              <small>
                Hobbies app by <a href="http://pacolemon.blogspot.com/" style="text-decoration:underline;">PacoLemon</a>.
              </small>
              <div>
                <small>Powered by <a href="https://ace.c9.io/" style="text-decoration:underline;">Ace</a> - The High Performance Code Editor for the Web.</small>
              </div>
            </div>
            <div>
              <h3 style="font-weight:bold;">Links</h3>
              <ul class="c links">
                <li><a href="https://github.com/tmpmachine/codetmp">Codetmp7 GitHub Page</a></li>
                <li><a href="https://github.com/ajaxorg/ace">Ace GitHub Page</a></li>
                <li><a href="pages/PP.html">Privacy Policy</a></li>
                <li><a href="pages/TOS.html">Terms of service</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div id="in-home-block" class="in-window in-block" style="z-index:0;"></div>

      <!-- # file manager -->
      <div id="in-my-files" class="in-window in-content col1 d-grid">

        <div class="w3-hide-small" style="height:34px;"></div>
        
        <div>

          <div class="border-bottom-dark menu-action d-flex" style="align-items: center;padding:8px 12px 0;justify-content: space-between;">  
            
            <div class="w3-left">

              <a href="javascript:void(0)" class="no-select option-menu" ondragstart="return false;" ondrop="return false;" tabindex="0">
                <div class="Btn w3-right w3-hover-none li no-select d-flex" style="align-items: center;padding:0">
                  <h5 class="Btn w3-medium w3-padding-small w3-left no-select" style="font-weight:bold;" id="workspace-title">Main</h5>
                  <i class="Btn material-icons w3-left">arrow_drop_down</i>
                </div>
                <div class="uid-A workspace no-select" onmousedown="event.preventDefault ? event.preventDefault() : event.returnValue = false" style="right:initial;left:0">
                  <div>
                    <div class="Btn w3-padding active" data-kind="item" data-onclick="change-workspace" data-index="0" data-target="Main" style="grid-template-columns: 1fr auto">
                      <div class="w3-small w3-padding-small" title="Default workspace">
                        <b>Main</b>
                        <div style="opacity: 0.8;font-size: 0.7rem">Files stored in browser storage</div>
                      </div>
                      <i class="material-icons">done_outline</i>
                    </div>
                    <div class="Btn w3-padding" data-kind="item" data-onclick="change-workspace" data-index="1" data-target="Playground" style="grid-template-columns: 1fr auto;align-items: center">
                      <span class="w3-small w3-padding-small" title="Secondary workspace">
                        <b>Playground</b>
                        <div style="opacity: 0.8;font-size: 0.7rem">Files cleared on application close</div>
                      </span>
                      <i class="material-icons">done_outline</i>
                    </div>
                    <div class="Btn w3-padding" data-kind="item" data-onclick="change-workspace" data-index="2" data-target="File System" style="grid-template-columns: 1fr auto;align-items: center">
                      <span class="w3-small w3-padding-small" title="Local system workspace">
                        <b>File System</b>
                        <div style="opacity: 0.8;font-size: 0.7rem">Create, read, or modify local system files</div>
                      </span>
                      <i class="material-icons">done_outline</i>
                    </div>
                  </div>
                </div>
              </a>
              <style type="text/css">
                .option-menu > div .Btn { border-left: 4px solid #9e9e9e; }
                .option-menu > div .Btn:not(.active) { border-left: 4px solid transparent; }
                .workspace .Btn .material-icons { opacity: 0.8 }
                .workspace .Btn:not(.active) .material-icons { visibility: hidden }
              </style>

            </div>

            <div class="w3-right d-flex" style="flex-wrap: wrap;justify-content: flex-end;">
              <div>

                  <a href="javascript:void(0)" class="no-select option-menu authorized" data-onclick="sync-from-drive" tabindex="0" ondragstart="return false;" ondrop="return false;">
                    <div class="Btn w3-button w3-right w3-hover-none li">
                      <div class="Btn w3-hide-medium w3-hide-small w3-small w3-padding-small w3-left">Refresh</div>
                      <i class="Btn material-icons">refresh</i>
                    </div>
                  </a>
                  <a href="javascript:void(0)" class="no-select option-menu" tabindex="0" ondragstart="return false;" ondrop="return false;">
                    <div class="Btn w3-button w3-right w3-hover-none li">
                      <i class="Btn material-icons">add</i>
                    </div>
                    <div class="uid-A">
                      <div>
                        <div class="Btn w3-padding" data-onclick="new-file">
                          <i class="material-icons">note_add</i>
                          <div class="w3-small w3-padding-small" title="New file">New File</div>
                        </div>
                        <div class="Btn w3-padding" data-onclick="new-folder">
                          <i class="material-icons">create_new_folder</i>
                          <span class="w3-small w3-padding-small" title="New folder">New Folder</span>
                        </div>
                        <div class="Btn w3-padding" data-onclick="clone-repo">
                          <div class="d-flex" style="justify-content: center;align-items: center;">
                            <i class="material-icons" style="visibility:hidden">http</i>
                            <img class="material-icons absolute" style="font-size: 1.3em;" src="assets/images/GitHub_Logo.png" width="36">
                          </div>
                          <div class="w3-small w3-padding-small">Clone Git Repository</div>
                        </div>
                        <div class="Btn w3-padding" data-onclick="upload-file">
                          <i class="material-icons">upload_file</i>
                          <span class="w3-small w3-padding-small" title="New folder" data-target="#file-upload">Upload a File</span>
                        </div>
                        <div class="Btn w3-padding" data-onclick="paste">
                          <i class="material-icons">paste</i>
                          <span class="w3-small w3-padding-small Label">Move here</span>
                        </div>
                        <div class="Btn w3-padding" data-onclick="create-workspace">
                          <i class="material-icons">workspaces</i>
                          <span class="w3-small w3-padding-small">Create Workspace</span>
                        </div>
                      </div>
                    </div>
                  </a>
                  <a href="javascript:void(0)" class="no-select option-menu notif-button" tabindex="0" ondragstart="return false;" ondrop="return false;">
                    <div class="Btn w3-button w3-right w3-hover-none li">
                      <i class="Btn material-icons">notifications</i>
                    </div>
                    <div class="uid-A" style="min-width:280px;font-size:0.7rem">
                      <div id="notif-list" class="ov-auto"></div>
                    </div>
                  </a>

              </div>

            </div>

          </div>

          <div class="d-grid" style="grid-template-columns: 1fr auto;padding:4px">

            <div class="ov-auto" style="scroll-behavior: smooth;">
              <div id="breadcrumbs" class="d-inline-flex no-select w3-small w3-padding"></div>
            </div>
            <div class="d-flex" style="justify-content: flex-end;padding:0 8px 0 0;align-items: center;">
              <a href="javascript:void(0)" class="no-select option-menu" tabindex="0" ondragstart="return false;" ondrop="return false;">
                <div class="Btn w3-button w3-right w3-hover-none li">
                  <i id="view-type-icon" class="Btn material-icons">grid_view</i>
                </div>
                <div class="uid-A" style="width: 150px">
                  <div>
                    <div class="Btn w3-padding active" data-onclick="change-file-list-view" data-type="grid">
                      <i class="material-icons">grid_view</i>
                      <span class="w3-small w3-padding-small" title="New folder">Grid view</span>
                    </div>
                    <div class="Btn w3-padding" data-onclick="change-file-list-view" data-type="list">
                      <i class="material-icons">view_list</i>
                      <div class="w3-small w3-padding-small" title="New file">List view</div>
                    </div>
                  </div>
                </div>
              </a>
              <a href="javascript:void(0)" class="no-select option-menu btn-file-action w3-hide" tabindex="0" ondragstart="return false;" ondrop="return false;">
                <div class="Btn w3-button w3-right w3-hover-none li">
                  <i class="Btn material-icons">more_vert</i>
                </div>
                <div class="uid-A">
                  <div>
                    <div class="Btn d-block w3-padding" data-onclick="file-rename">
                      <i class="material-icons">edit</i>
                      <div class="w3-small w3-padding-small">Rename</div>
                    </div>
                    <div class="Btn d-block w3-padding" data-onclick="file-delete">
                      <i class="material-icons">delete</i>
                      <span class="w3-small w3-padding-small" title="Move to trash">Trash</span>
                    </div>
                    <div class="Btn d-block w3-padding" data-onclick="file-download">
                      <i class="material-icons">get_app</i>
                      <span class="w3-small w3-padding-small">Download</span>
                    </div>
                    <div class="Btn d-block w3-padding" data-onclick="copy">
                      <i class="material-icons">copy</i>
                      <span class="w3-small w3-padding-small">Copy</span>
                    </div>
                    <div class="Btn d-block w3-padding" data-onclick="move">
                      <i class="material-icons">drive_file_move</i>
                      <span class="w3-small w3-padding-small">Move</span>
                    </div>
                    <div class="Btn d-block w3-padding authorized" data-onclick="file-unload">
                      <i class="material-icons">refresh</i>
                      <span class="w3-small w3-padding-small">Resync</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>

          </div>

        </div>

        <div id="in-my-files-drop-zone">
          <!-- # widget file list -->
          <div class="wg-FileList _fileList" data-onclick="handle-file-list-click"></div>
          <div class="drop-zone w3-hide" data-target="explorer" data-message="1"></div>
        </div>

      </div>

      <div id="in-trash" class="in-window in-content bg1 col1 ov-hidden">
        <div class="w3-hide-small" style="height:34px;"></div>
        <div class="w3-padding border-bottom-dark">
          <div class="no-select">
            <h5><b>Trash <small>(Preview only)</small> <small class="w3-black w3-round" style="padding:0 2px 2px ;">Beta</small></b></h5>
          </div>
        </div>
        <div class="h-100">
          <div style="z-index:1;" class="ov-auto pos-relative h-100">
            <div id="list-trash" class="w3-padding d-flex" style="flex-flow:wrap;"></div>
          </div>
        </div>
      </div>

      <div id="in-trash-block" class="in-window in-block"></div>
      <div id="in-settings-block" class="in-window in-block"></div>

      <!-- # editor window -->
      <div class="in-window d-grid ov-hidden h-100">
        <div class="pos-relative h-100 d-grid" style="grid-template-rows:auto auto 1fr;">
          
          <div id="nav-bar" class="no-select w3-small w-100">

            <div class="pos-relative d-flex justify-content-between">

              <div class="menu-bar">
                
                <button class="tree-explorer-btn-expand d-none" title="File Tree Explorer (Alt + Q)" data-onclick="expand-tree-explorer" style="border: 0;cursor: pointer;color: #97bcc1;border-right: 1px solid hsl(214deg 14% 13%);">
                  <i class="material-icons i-btn-in">chevron_right</i>
                </button>
                <div class="drop-menu">
              <a href="#" class="Root w3-padding">File</a>
                  <div class="Submenu">
                    <a href="#" class="w3-padding Items menu-link" data-callback="save" data-shortcut="Ctrl + S"> Save </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="save-all" data-shortcut="Ctrl + Shift + S"> Save All </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="new-file" data-shortcut="Alt + N"> New File </a>
                    <a href="#" class="w3-padding Items menu-link hide" data-callback="new-file-on-disk">New File on Disk</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="new-folder" data-shortcut="Alt + Shift + N"> New Folder </a>
                    <a href="#" class="w3-padding Items menu-link feature-fs" data-callback="open-disk-folder" data-shortcut="Ctrl + O"> Open Folder from Disk </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="preview" data-shortcut="Ctrl + Enter"> Preview </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="preview-at-pwa" data-shortcut="Ctrl + Shift + Enter">Preview PWAs</a>
                  </div>
                </div>
                <div class="drop-menu">
              <a href="#" class="Root w3-padding">Explorer</a>
                  <div class="Submenu">
                    <a href="#" class="w3-padding Items menu-link" data-callback="my-files" data-shortcut="Alt + M"> My Files </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="open-in-explorer" data-shortcut="Alt + O"> Open File in Explorer </a>
                    <a class="w3-padding Items menu-link" href="#" data-onclick="create-session">Create a new session</a>
                    <a href="#" class="w3-padding Items menu-link w3-hide" data-callback="trash"> Trash </a>
                  </div>
                </div>
                <!-- view menu -->
                <div class="drop-menu">
                  <a href="#" class="Root w3-padding">View</a>
                  <div class="Submenu">
                    <a href="#" class="w3-padding Items menu-link" data-callback="command-palette" data-shortcut="Ctrl + Shift + P"> Command Palette </a>
                  </div>
                </div>

                <div class="drop-menu">
              <a href="#" class="Root w3-padding">Editor</a>
                  <div class="Submenu">
                    <a href="#" class="w3-padding Items menu-link" data-callback="set-font-size"> Set Font Size </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="toggle-editor-theme"> Toggle Light Theme </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="toggle-word-wrap"> Toggle Word Wrap </a>
                    <a href="#" class="w3-padding Items menu-link" data-callback='' data-shortcut="Alt + K, K"> Toggle Bookmark</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback='' data-shortcut="Alt + K, L"> Clear Bookmark</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback='' data-shortcut="Ctrl + Alt + ,"> Go To Previous Bookmark</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback='' data-shortcut="Ctrl + Alt + ."> Go To Next Bookmark</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback='' data-shortcut="Alt + ,"> Previous Tab</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback='' data-shortcut="Alt + ."> Next Tab</a>
                  </div>
                </div>
                <div class="drop-menu">
              <a href="#" class="Root w3-padding">Publish</a>
                  <div class="Submenu">
                    <a href="#" class="w3-padding Items menu-link authorized" data-callback="modal" data-target="deploy-firebase">Deploy to Firebase Hosting</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="generate-single-file" data-shortcut="Alt + P">Generate Single File</a>
                  </div>
                </div>
                <div class="drop-menu">
              <a href="#" class="Root w3-padding">Help</a>
                  <div class="Submenu">
                    <a href="pages/PP.html" class="w3-padding Items">Privacy Policy</a>
                    <a href="pages/TOS.html" class="w3-padding Items">Terms of Service</a>
                    <a href="#" class="w3-padding Items menu-link" data-callback="about">About Codetmp</a>
                  </div>
                </div>

              </div>

              <div class="menu-bar">

                <div class="drop-menu">
                <a href="#" class="Root w3-padding menu-link" data-callback="modal" data-target="settings">Settings</a>
                </div>
                <div class="drop-menu unauthorized">
                  <a href="#" class="Root w3-padding menu-link" data-callback="modal" data-target="account">Sign in</a>
                </div>
                <div class="drop-menu authorized">
                  <a href="#" class="Root w3-padding menu-link" data-callback="modal" data-target="account">My Account</a>
                  <!-- <div class="Submenu" style="right:0">
                    <a href="#" class="w3-padding Items menu-link" data-callback="sign-out">Sign out</a>
                  </div> -->
                </div>

              </div>

            </div>

            <!-- # navbar line -->
            <div style="border-top:1px solid #3b3b3b;"></div>

          </div>
          
          <div class="d-grid pos-relative file-tab-container">
            
            <!-- # file tab -->
            <div id="file-title" class="wg-FileTab" data-mousedown="handle-click-file-tab" data-ctxmenu="handle-ctxmenu-file-tab"></div>

            <div id="more-tab" data-onclick="more-tab" class="w3-left pos-relative d-none" style="z-index:1;">
              <div>
                <div class="w3-rest pos-relative" style="padding:18px 24px;line-height:1.5em;">
                  <div class="file-tab-name no-select w3-small w3-left h-100 d-flex w-100 absolute" data-title="__name__" style="left:0;top:0;color:#fff!important;font-weight:bold;align-items:center;justify-content:center;">
                    <i class="material-icons">navigate_next</i>
                  </div>
                </div>
              </div>
              <div style="height:3px"></div>
            </div>
          </div>
          
          <div class="pos-relative">
            <div id="editor-wrapper" spellcheck="false" class="relative h-100" style="background:#21252b;"></div>
            <div data-target="editor" data-message="1" class="drop-zone w3-hide"></div>
          </div>
        </div>
      </div>
    </div>
    <div id="sidebar" class="w3-animate-left HIDE ov-auto" data-onclick="handle-sidebar-btn-click">
      
      <!-- # sidebar -->
      <div class="Inner sidebar-inner h-100">
        <div id="btn-menu-my-files" class="wgs-BtnSidebar _btnSidebar no-select" menu="in-my-files">
          <i class="material-icons i-btn-in">folder</i>
          <label class="l-btn-in">My Files</label>
        </div>
        <div id="btn-menu-settings" class="w3-animate-left wgs-BtnSidebar _btnSidebar no-select w3-hide-medium w3-hide-large" data-onclick="toggle-settings">
          <i class="material-icons i-btn-in">settings</i>
          <label class="l-btn-in">Settings</label>
        </div>
        <div id="btn-menu-preview-wrapper" class="relative" style="z-index:0;">
          <div class="_btnMenuPreview wgs-BtnSidebar no-select w3-animate-left" data-onclick="btn-menu-preview" _btnSidebar>
            <i class="material-icons i-btn-in">play_arrow</i>
            <label class="l-btn-in">Preview</label>
          </div>
        </div>
        <div id="btn-menu-save-wrapper" class="relative" style="z-index:0;">
          <div data-onclick="btn-menu-save" class="wgs-BtnSidebar _btnSidebar w3-animate-left no-select">
            <i class="material-icons i-btn-in">save</i>
            <label class="l-btn-in">Save</label>
          </div>
        </div>
        <div id="btn-menu-template" data-onclick="btn-menu-template" class="w3-animate-left wgs-BtnSidebar _btnSidebar no-select">
          <i class="material-icons i-btn-in">extension</i>
          <label class="l-btn-in">Snippets</label>
        </div>
        <div id="btn-undo" data-onclick="btn-undo" class="w3-animate-left wgs-BtnSidebar _btnSidebar no-select w3-hide-medium w3-hide-large">
          <i class="material-icons i-btn-in">undo</i>
          <label class="l-btn-in">Undo</label>
        </div>
        <div id="btn-redo" data-onclick="btn-redo" class="w3-animate-left wgs-BtnSidebar _btnSidebar no-select w3-hide-medium w3-hide-large">
          <i class="material-icons i-btn-in">redo</i>
          <label class="l-btn-in">Redo</label>
        </div>
        <div id="btn-menu-trash" data-onclick="btn-menu-trash" class="wgs-BtnSidebar _btnSidebar no-select hide " menu="in-trash">
          <i class="material-icons i-btn-in">delete</i>
          <label class="l-btn-in">Trash</label>
        </div>
        
        <div id="btn-home-wrapper" class="hide w3-animate-left pos-relative" style="z-index:0;">
          <div id="btn-home" id="btn-home" class="wgs-BtnSidebar _btnSidebar no-select w3-hide-medium w3-hide-large" data-onclick="toggle-homepage">
            <i class="material-icons i-btn-in">home</i>
            <label class="l-btn-in">Home</label>
          </div>
        </div>
        <div id="btn-account-wrapper" class="hide w3-animate-left wgs-BtnSidebar _btnSidebar no-select  w3-hide-medium w3-hide-large" data-onclick="toggle-account">
          <i class="material-icons i-btn-in">account_circle</i>
          <label class="l-btn-in">Account</label>
        </div>
        <div class="bg5x absolute" style="top:0;left:0;right:0;bottom:0;z-index:-2;"></div>
      </div>
      <!--  -->
      <!-- END OF SIDEBAR MENU -->


      <!-- FILE TREE EXPLORER -->
      <!--  -->
      <div class="tree-explorer d-none">
        <div class="no-select w3-small">
          <button data-onclick="collapse-tree-explorer" class=" tree-explorer-btn-collapse">
            <i class="material-icons i-btn-in">chevron_left</i>
          </button>
        </div>
        <div>
          <button data-onclick="reload-file-tree" class=" tree-explorer-btn-collapse">
            <i class="material-icons i-btn-in">sync</i> Reload
          </button>
          <button>Info: Right click to reveal file</button>
        </div>
        <div id="file-tree" class="d-grid">
          <ul class="file-tree-list file-tree" data-fid="-1">
            <li class="folder-root open">
              <span class="folder-name root" data-fid="-1">My Files</span>
              <ul class="isLoaded"></ul>
            </li>
          </ul>
        </div>
        <div id="tree-workspace">
          <div data-fid="-1" class="--active no-select">My Files</div>
        </div>
      </div>
      <!--  -->
      <!-- END OF FILE TREE EXPLORER -->

    </div>
    <div id="status-bar" class="no-select">
      <small id="txt-sync"></small>
      <span>&nbsp;</span>
    </div>
  </div>

  <div id="limbo" class="limbo">
    <iframe name="PreviewFrame" id="PreviewFrame" src=""></iframe>
    <iframe name="PreviewFramePWA" id="PreviewFramePWA" src=""></iframe>
    <iframe name="_frameSilentRefresj" src=""></iframe>
    <input id="file-upload" type="file" onchange="compoFileReader.uploadFile(this)">
  </div>

  <template id="tmp-file-tree-file">
    <li><span class="file-name"></span></li>
  </template>

  <template id="tmp-file-tree-directory">
    <li>
      <span class="folder-name"></span>
      <ul></ul>
    </li>
  </template>


  <template id="modal-v2">
  <style>
    :host {
      position: relative;
    }
    *,:after,:before{box-sizing:border-box}
    .window {
      padding: 16px 0;
      position:fixed;
      top:0;
      left:0;
      right:0;
      bottom:0;
      visibility: visible;
      opacity: 1;
      display: grid;
      margin:0 auto;
      max-width:544px;
      align-items: center;
      transition: 0.25s
    }
    .window.hide {
      visibility: hidden;
      opacity: 0;
    }
    .window .modal {
      transition: 0.25s;
      transform: scale(1);
      display: grid;
      grid-template-rows: 1fr;
      align-items:  center;
      /*grid-template-rows: auto 1fr auto;*/
      margin: 0 16px;
      position: relative;
      overflow: hidden;
      max-height: 100%;
      outline: 1px solid  #2e2e2e;
    }
    .window.hide .modal {
      transform: scale(0.95);
      visibility: hidden;;
    }
    .window .overlay{
      background: #000000aa;
      width: 100%;
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
    }
    slot {
      overflow:  hidden;
      display: grid;
      max-height: 100%;
      grid-template-rows:  1fr;
    }
  </style>
  
  <div class="window hide">
    <div class="overlay"></div>
    <div class="modal">
      <slot name="content"></slot>
    </div>
  </div>
</template>


<!-- # templates -->
<!-- =========== -->

<template id="tmp-notif" class="Export">
  <div class="w3-padding Btn">
    <span class="Timestamp"></span>
    <div>
      <div class="Title" style="font-weight:bold"></div>
      <div class="Content"></div>
    </div>
  </div>
</template>
<template id="tmp-keyboard-shortcut" class="Export">
  <small class="shortcuts w3-right"></small>
</template>
<template id="tmp-hints" class="Export">
  <div class="w3-white">
    <div class="Container" data-index="">
      <div class="search-hints pos-relative">
        <div class="Title w3-padding d-block"></div>
      </div>
    </div>
  </div>
</template>
<template id="tmp-hints-last" class="Export">
  <div class="w3-white ov-hidden" style="border-radius:0 0 4px 4px;">
    <div class="Container" data-index="">
      <div class="search-hints last pos-relative">
        <div class="Title w3-padding d-block"></div>
      </div>
    </div>
  </div>
</template>
<template id="tmp-breadcrumb" class="Export">
  <div class="w3-padding w3-button breadcrumbs Button"></div>
</template>
<template id="tmp-file-list" class="Export">
  <!-- # tmp-file-list -->
  <div class="pos-relative file-list bg2 files pointer no-select Clicker" data-action="confirm-click" title="" data-type="file" data-fid="" data="" data-kind="itemFile">
    <div class="text-center Area" style="padding:32px 0">
      <i class="material-icons Preview-icon" style="font-size:36px">insert_drive_file</i>
    </div>
    <div class="inner">
      <i class="material-icons icons w3-medium w3-left Icon" style="padding:2px 0">insert_drive_file</i>
      <div class="w3-rest w3-small w3-padding pos-relative" style="font-weight:bold;">
        <div class="h-100 d-grid w-100 pos-absolute" style="top: 0;left: 0;">
          <div style="align-items: center;" class="h-100 Name d-flex"></div>
        </div>
      </div>
    </div>
  </div>
</template>
<template id="tmp-folder-list" class="Export">
  <!-- # tmp-folder-list -->
  <div class="folder-list bg2 folders pointer no-select Clicker inner" data-action="confirm-click" title="" data-type="folder" data="" data-kind="itemFile">
    <i class="icons material-icons w3-medium w3-left" style="padding:2px 0">folder</i>
    <small class="relative ov-hidden" style="font-weight:bold">
      <div class="h-100 d-grid pos-absolute">
        <div style="align-items: center" class="h-100 Name d-flex"></div>
      </div>
    </small>
  </div>
</template>
<template id="tmp-list-file-trash" class="Export">
  <div class="file-list files pointer no-select bg7 hover-bg3-light pos-relative" style="margin:0.1em;padding:0;">
    <div class="text-center w3-padding-32">
      <i class="material-icons w3-xxlarge" style="color:#777;">insert_drive_file</i>
    </div>
    <div class="bg2 w3-padding">
      <div class="w3-col" style="width:24px;">
        <i class="material-icons w3-medium w3-left" style="padding:2px 0;color:__iconColor__!important;">insert_drive_file</i>
      </div>
      <div class="w3-rest w3-small w3-padding pos-relative" style="font-weight:bold;">
        <div style="top:0;left:0" class="h-100 w-100 pos-absolute">
          __name__
        </div>
      </div>
    </div>
  </div>
</template>
<template id="tmp-list-folder-trash" class="Export">
  <div class="folder-list w3-left pointer no-select folders bg2 hover-bg3-light" style="margin:0.1em;padding:0;">
    <div class="d-grid" style="padding:8px 16px;grid-template-columns:auto 1fr;">
      <div style="width:24px;">
        <i class="material-icons w3-medium w3-left" style="padding:2px 0;color:__iconColor__!important;">folder</i>
      </div>
      <small class="relative ov-hidden" style="font-weight:bold;">
        <div style="top:0;left:0;" class="h-100 w-100 pos-absolute">
          __name__
        </div>
      </small>
    </div>
  </div>
</template>

<template id="tmp-file-tab" class="Export">
  <!-- # tmp-file-tab -->
  <div class="w3-left file-tab relative" data-kind="itemFileTab" data-title="" data-parent-id="">
    <div class="Indicator"></div>
    <div>
      <div class="w3-right" style="padding:6px 10px;">
        <i class="file-closer material-icons w3-right w3-button w3-hover-none w3-hover-text-light-grey w3-medium w3-text-gray icon-rename" data-action="close" style="padding:4px 0 4px 9px;"></i>
      </div>
      <div class="w3-rest pos-relative" style="padding:18px 24px;line-height:1.5em;">
        <div class="file-tab-name no-select w3-small file-name w3-left w-100 absolute"></div>
      </div>
    </div>
  </div>
</template>

<template id="msg-git-rate-limit" class="Export">
  <div>Rate limit remaining : <b><span class="Rate">54</span></b>. <a href="https://github.com/tmpmachine/codetmp/wiki/GitHub-Rate-Limit" target="_blank">(What is this? <span class="material-icons" style="font-size:14px">open_in_new</span>)</a></div>
</template>
<template id="msg-drop-zone-no-edit" class="Export">
  <div>
    <i class="material-icons">upload</i><br>
    <p>Drop to open files on editor.</p>
  </div>
</template>
<template id="msg-drop-zone" class="Export">
  <div>
    <i class="material-icons">upload</i><br>
    <!-- <p class="Helpnote">Hold <b>Ctrl</b> key to enable local editing of dropped files.</p> -->
    <!-- <p class="Helpnote w3-hide">(Feature disabled, window not focused)</p> -->
    <p class="Helpnote">Drop your files here</p>
  </div>
</template>
<template id="msg-drop-edit-mode" class="Export">
  <div>
    <i class="material-icons">edit</i><br>
    <p>Drop your files here.</p>
  </div>
</template>
<template data-name="tree-node" class="Export">
  <ul class="file-tree-list file-tree d-none" data-fid="-1">
    <li class="folder-root open">
      <span class="folder-name root" data-fid="">Root</span>
      <ul class="isLoaded"></ul>
    </li>
  </ul>
</template>

<div class="w-100 search-box w3-hide Export" style="position:fixed;z-index:8177;top:0;height:0;padding-top:3rem">
  <div style="max-width:400px;margin:auto;">
    <div class="pos-relative">
      <div class="search-box relative">
        <div class="w3-round w3-white d-grid relative" style="z-index:1;grid-template-columns:1fr auto;align-items:center">
          <div class="button-tb ov-hidden">
            <input id="search-input" class="w3-round w3-white w3-padding w-100" autocomplete='off' data-onkeydown="cmd-select-command" data-oninput="cmd-search-command" placeholder='Search snippets' type='text' name='q' style="border:0;padding:16px"/>
          </div>
          <div>
            <label for="search-input">
              <i id="btn-search" class="material-icons ai-button" onclick="resetSearch(this)">search</i>
            </label>
          </div>
        </div>
      </div>
    </div>
    <div id="search-result" class="pos-relative" style="z-index:1;top:-2px;"></div>
  </div>
</div>

<template id="tmp-quick-search" data-export>
  <div data-view-group="feat" data-view-name="quickSearch">
    <div class="w-100 wg-QuickSearch" style="position:fixed;z-index:8177;top:0;height:0;padding-top:3rem">
      <div style="max-width:400px;margin:auto;">
        <div class="pos-relative">
          <div class="d-grid relative align-items-center" style="z-index:1;grid-template-columns:1fr auto;">
            <input class="_searchInput w-100" autocomplete='off' data-lazy-onkeydown="cmd-select-command" data-lazy-oninput="cmd-search-command" placeholder="Search file tree" type="text"/>
          </div>
        </div>
        <div class="_searchResult pos-relative" style="z-index:1;top:-2px;"></div>
      </div>
    </div>
  </div>
</template>

<div id="update-notif" class="Export w-100" style="position:fixed;bottom:0;left:0;background:#0b0b0e;color:#ccc;z-index:8177;font-weight:bold">
  <div class="w3-right">
    <div id="btn-refresh" style="padding:16px;text-transform:uppercase;font-weight:bold;color:#d8d782;">Refresh</div>
    <div id="btn-dismiss" style="padding:16px;text-transform:uppercase;font-weight:bold;">Dismiss</div>
  </div>
  <div class="w3-rest">
    <small style="padding:16px;">New version available</small>
  </div>
</div>

<modal-v2 class="modal-component Export" data-name="settings">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b class="title">Settings</b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      
      <section>
        <h6 style="font-weight:bold;">Preview</h6>
        <p>
          <label><input data-name="divlessHTMLEnabled" class="autofocus w3-check input-settings" type="checkbox"/> Convert Divless HTML format (.html files only)</label>
        </p>
        <p>
          <label><input data-name="linkPreviewWindowProcess" class="autofocus w3-check input-settings" type="checkbox"/> Link preview window process (might freeze editor while in debug mode)</label>
        </p>
        <small>JavaScript (Terser) : </small>
        <p>
          <label><input data-name="minifyJs" class="autofocus w3-check input-settings" type="checkbox"/> Minify</label>
        </p>
      </section>
      <hr/>
      <section>
        <h6 style="font-weight:bold;">File Manager</h6>
        <p>
          <label><input data-name="divlessHTMLFSEnabled" class="autofocus w3-check input-settings" type="checkbox"/> Convert Divless HTML format on file save (.html files only)</label>
        </p>
      </section>
      <hr/>
      <section>
        <h6 style="font-weight:bold;">Editor</h6>
        <p>
          <label><input data-name="emmetEnabled" class="w3-check input-settings" type="checkbox"/> Emmet Support</label>
        </p>
        <p>
          <label><input data-name="autoCompleteEnabled" class="w3-check input-settings" type="checkbox"/> Autocompletion</label>
        </p>
      </section>
      <hr/>
      <section>
        <h6 class="w3-hide" style="font-weight:bold;">Google Drive Sync</h6>
        <p>
        <label><input id="check-auto-sync" class="w3-check" type="checkbox" oninput="ui.toggleAutoSync()" checked/> Automatically sync files and folders</label>          
        </p>
      </section>
      <hr/>

      <!-- work offline -->
      <section>
        <h6 style="font-weight:bold;">Updates & Offline Access</h6>
        <button type="button" class="btn-style-1" style="width:auto" onclick="pwaCacher.update()">Check for updates</button>
        <button type="button" class="btn-style-1" style="width:auto" onclick="pwaCacher.removeUpdate()">Remove App Cache</button>
        <p>*) Removing app cache will disable offline access until you update the app manually by clicking on <b>Check for updates</b> button.</p>
      </section>
      <hr/>

      <section>
        <h6 style="font-weight:bold;">File Storage</h6>
        <p>Delete locally saved files & folders (doesn't affect your files on Google Drive).</p>
        <button class="btn-style-1  toggler" style="width:auto" data-onclick="clear-data">Clear data</button>
      </section>
      <hr/>
      <section>
        <h6 style="font-weight:bold;">GitHub Token</h6>
        <p>Set personal access token to get higher rate limit. Valid until this application is closed.</p>
        <p><label><input id="check-save-token" class="w3-check" type="checkbox" oninput="ui.toggleSaveToken()"/> Store token in browser storage</label></p>
        <button class="btn-style-1 " style="width:auto" data-onclick="set-git-token">Set token</button>
      </section>
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="snippet-manager">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b class="title">Snippet Manager</b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      <section>
        <p>
          <i>This feature is still in development.</i>
        </p>
        <p>
          You can manage custom snippets here.
        </p>
      </section>
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="deploy-firebase">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b class="title">Deploy to Firebase Hosting</b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      <section>
        <div class="unauthorized">You're not logged in. Sign in to use this feature.</div>

        <div class="feature-disabled" data-feature="firebase">
          Access to Firebase account is required.
          <div style="height:1em"></div>
          <button class=" btn-style-1 w-100" data-onclick="grant-firebase-access">Grant Access</button>
        </div>

        <form class="authorized feature-enabled submittable preventDefault if-post" data-callback="deploy-hosting" data-feature="firebase">
          
          <p>Note : You are deploying current opened directory.</p>
          <small>Manage your project at <a href="https://firebase.google.com/" target="_blank"><u>Firebase</u></a></small>

          <div style="height:1em"></div>
          <small>Select Project</small>
          <select id="project-list" class="inputable" data-callback="select-project" name="projectId"></select>
          <div style="height:1em"></div>
          <div>
            <small class="if-post">Select Site</small>
          </div>
          <select id="site-list" class="inputable" data-callback="select-site" name="siteId"></select>
          <div style="height:1em"></div>
          <div>
            <small class="if-post">Cache-Control</small>
          </div>
          <input type="number" value="0" name="cacheControl"/> seconds

          <!-- deploy options -->
          <div>

            <h4 style="font-weight:bold;">Deploy options</h4>
            
            <!-- firebase js options -->
            <small>JavaScript (Terser) : </small>
            <p>
              <label>
                <input class="autofocus w3-check input-settings" name="minifyJs" type="checkbox"/> 
                Minify
              </label>
            </p>
            <small>CSS (Lighting CSS, transform target : Chrome 95) : </small>
            <mark class="w3-round" style="padding:0 2px 2px ;"><small>Beta</small></mark>
            <p>
              <label>
                <input name="minifyCss" class="autofocus w3-check input-settings" type="checkbox"/> 
                Minify
              </label>
              <label>
                <input name="transformCss" class="autofocus w3-check input-settings" type="checkbox"/> 
                Transform
              </label>
            </p>

          </div>

          <div style="height:1em"></div>
          <button class="btn-style-1">Deploy</button>
          <div style="height:1em"></div>
          <div id="deploy-logs"></div>
        </form>

      </section> 
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="file-download">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b class="title">File Download</b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      <section>
        <h6 style="font-weight:bold;">Download options</h6>
        <form class="submittable preventDefault" data-callback="confirm-download">
          <p>
            <label class="no-select"><input class="w3-check" name="replaceDivless" type="checkbox"/> Convert Divless-HTML tag</label>
          </p>
          <p class="no-select">
          <!-- <p class="no-select _in-replaceFileTemplate"> -->
            <label class="no-select"><input class="w3-check" name="replaceFileTag" type="checkbox"/> Replace &lt;file> template </label>
          </p>
          <p class="no-select">
            <label class="no-select"><input class="w3-check" name="minifyJs" type="checkbox"/> Try to minify JavaScript files</label>
          </p>
          <div style="text-align:right;">
            <button class="btn-style-1 autofocus" name="submit" style="width:auto">Download</button>
          </div>
        </form>
      </section> 
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="generate-single-file">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b>Generate Single File</b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      <section>
        <h6 style="font-weight:bold;">File options</h6>

        <form onsubmit="event.preventDefault()">
        
          <div>
            <label class="no-select">
              <input class="w3-check" name="replaceDivless" type="checkbox"/> Convert Divless HTML format
            </label>
          </div>
          <div class="void void-half"></div>
          <small>JavaScript (Terser) : </small>
          <p>
            <label><input name="minifyJs" class="autofocus w3-check input-settings" type="checkbox"/> Minify</label>
          </p>
          <small>CSS (Lighting CSS, transform target : Chrome 95) : </small>
          <mark class="w3-round" style="padding:0 2px 2px ;">
            <small>Beta</small>
          </mark>
          <p>
            <label>
              <input name="minifyCss" class="autofocus w3-check input-settings" type="checkbox"/> 
              Minify
            </label>
            <label>
              <input name="transformCss" class="autofocus w3-check input-settings" type="checkbox"/> 
              Transform
            </label>
            <label>
              <input name="wrapCdata" class="autofocus w3-check input-settings" type="checkbox"/> 
              Wrap in CDATA tags
            </label>
          </p>

          <div class="d-flex justify-content-end mt-1">
            <button class="btn-style-1  toggler autofocus" data-onclick="copy-generated-file" name="submit" style="width:auto">
              <i class="material-icons" style="color:white">content_paste</i> 
              <span class="ml-1">Copy</span>
            </button>
            <button class="btn-style-1 ml-2  toggler" data-onclick="generate-single-file" name="submit" style="width:auto">
              <i class="material-icons" style="color:white">download</i> 
              <span class="ml-1">Download</span>
            </button>
          </div>

        </form>

      </section>
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="account">
  <!-- # account, # my account -->
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b>My Account</b></h5>
      <button class="material-icons toggler close-btn autofocus">close</button>
    </div>
    <div class="Content">
      <section>

        <!-- Backup and restore -->
        <h3>Sync to Google Drive</h3>
        <div>
          <div class="d-flex flex-wrap" style="gap:0.25rem;">
            <div data-view-group="features-cloud" data-view-name-not="authorized">
              <!-- authorize -->
              <button class="btn-style-1 btn btn-style-1" data-onclick="authorize">Authorize</button>
            </div>
          </div>
          <span id="txt-backup-status"></span>
          <span id="txt-restore-status"></span>
        </div><div style="margin-bottom:0.5rem;"></div>

        <p class="w3-small unauthorized">(!) Your files are <b>currently stored locally</b> in browser storage. Sign in to synchronize with Google Drive across devices.</p>
        <div id="g-signin2" class="unauthorized"></div>
        <div data-view-group="features-cloud" data-view-name="authorized">
          <!-- sign out, revoke token -->
          <button class="btn-style-1 " style="width:auto" data-onclick="sign-out">Sign out</button>
          <button class="btn-style-1" style="width:auto" data-onclick="revoke-access">Revoke access</button>
        </div>
        <hr/>
        <p class="w3-small">By using <b>Codetmp</b>, you're considered agreed to terms and condition written on articles below :</p>
        <ul>
          <li>
             <u><a target="_blank" href="pages/TOS.html" style="font-weight:bold;">Terms of Service</a></u>
          </li>
          <li>
             <u><a href="pages/PP.html" target="_blank" style="font-weight:bold;">Privacy Policy</a></u>
          </li>
        </ul>
        </section>
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="prompt">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b class="title"></b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      <form data-type="prompt">
        <section>
          <input type="" name="" class="w3-input autofocus" spellcheck="false">
          <small class="notes"></small>
          <div class="void void-full"></div>
          <div class="text-right no-select">
            <button class="Btn-submit btn-style-1" type="submit" name="submit" ><i class="material-icons">check</i>Ok</button>
            <button type="button" class="toggler btn-style-2"><i class="material-icons">close</i>Cancel</button>
          </div>
        </section>
      </form>
      </div>
    </div>
  </div>
</modal-v2>

<modal-v2 class="modal-component Export" data-name="confirm">
  <div class="Modal bg8 col1" slot="content">
    <div class="Header no-select d-flex justify-content-between">
      <h5><b class="title">Confirm</b></h5>
      <button class="material-icons toggler close-btn">close</button>
    </div>
    <div class="Content">
      <form data-type="confirm">
        <section>
        <p class="message"></p>
        <div class="void void-full"></div>
        <div class="text-right no-select">
          <button class="Btn-submit btn-style-1 autofocus" type="submit" name="submit" ><i class="material-icons">check</i>Ok</button>
          <button type="button" class="toggler btn-cancel btn-style-2"><i class="material-icons">close</i>Cancel</button>
        </div>
        </section>
      </form>
      </div>
    </div>
  </div>
</modal-v2>

<script>
  (function() {
    let $ = document.querySelector.bind(document);
    let $$ = document.querySelectorAll.bind(document);

    let version = Math.floor(2.1);
    let templateId = `modal-v${version}`;
    class CustomElement extends HTMLElement {
      constructor() {
        super();
         /* production-script
        let template = document.createElement('template');
        template.setAttribute('id', templateId);
        template.innerHTML = "@replaceWithTemplateHTML@";
        document.querySelector('html').append(template);
        // */
        let content = $(`template#${templateId}`).content.cloneNode(true);
        this.attachShadow({mode: 'open'}).append(content);
        this.shadowRoot.querySelector('slot').addEventListener('slotchange', this.updateContent.bind(this));
        this.onclose = new CustomEvent('onclose');
        this.keyTrapper = this.keyTrapper.bind(this);
      }
      
      toggle(state) {
        let isClosed = this.shadowRoot.querySelector('.window').classList.toggle('hide');
        this.isShown = !isClosed;
        if (isClosed) {
          this.dispatchEvent(this.onclose);
          this.removeListener();
        } else {
          this.attachKeytrap();
        }
        return this;
      }
      
      close() {
        let isClosed = this.shadowRoot.querySelector('.window').classList.toggle('hide', true);
        this.dispatchEvent(this.onclose);
        this.removeListener();
      }
      
      removeListener() {
        document.removeEventListener('keydown', this.keyTrapper);
      }
      
      attachKeytrap() {
        let focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
        let focusableContent = this.modalContent.querySelector(focusableElements);
        this.firstFocusableElement = focusableContent[0]
        this.lastFocusableElement = focusableContent[focusableContent.length - 1]; 
        let autofocusElement = this.modalContent.querySelector('.autofocus');
        document.addEventListener('keydown', this.keyTrapper);
        let self = this;
        document.activeElement.blur();
        if (autofocusElement) {
          window.setTimeout(function() {
            autofocusElement.focus()
          }, 150);
        }
      }
      
      keyTrapper(e) {
        let isTabPressed = e.key === 'Tab' || e.keyCode === 9;
        let isEscape = e.key === 'Escape' || e.keyCode === 27;
        if (isEscape)
          this.close();
        if (!isTabPressed) {
          return;
        }
      
        if (e.shiftKey) { 
          if (document.activeElement === this.firstFocusableElement) {
            this.lastFocusableElement.focus(); 
            e.preventDefault();
          }
        } else {
          if (document.activeElement === this.lastFocusableElement) {
            this.firstFocusableElement.focus();
            e.preventDefault();
          }
        }
      }
      
      connectedCallback() {
        this.shadowRoot.querySelector('.overlay').addEventListener('click', this.close.bind(this));
      }
      
      updateContent(evt) {
        let contentDOM = evt.target.assignedNodes()[0];
        this.modalContent = contentDOM;
        for (let node of contentDOM.querySelectorAll('.toggler'))
          node.addEventListener('click', this.close.bind(this));
      }
    }
    customElements.define(templateId, CustomElement);
  })();
</script>

  <!--service worker handler-->
  <script>
    (function() {
      let worker;
      let checkUpdate;
      
      function clientUpdateHandler(swo) {
        let $ = function(query) { return document.querySelector(query) };
        if (worker)
          worker.waiting.postMessage({action: 'skipWaiting'});
        else if (swo)
          swo.waiting.postMessage({action: 'skipWaiting'});
        new Promise(function(resolve, reject) {
          if ($('#update-notif') !== null) {
            $('#update-notif').classList.toggle('active', true);
            $('#btn-refresh').onclick = resolve;
            $('#btn-dismiss').onclick = reject;
          } else {
            checkUpdate = setInterval(function() {
              if ($('#update-notif') !== null) {
                clearInterval(checkUpdate)
                $('#update-notif').classList.toggle('active', true);
                $('#btn-refresh').onclick = resolve;
                $('#btn-dismiss').onclick = reject;
              }
            }, 1000)
          }
        }).then(function() {
          $('#update-notif').classList.toggle('active', false);
          location.href = location.href;
        }).catch(function() {
          $('#update-notif').classList.toggle('active', false);
        });
      }
      if (typeof(navigator) !== 'undefined' && 'serviceWorker' in navigator) {
        // uncomment to debug without SW
        // return;
        navigator.serviceWorker.register('/sw.js').then(function(swo) {
          if (!navigator.serviceWorker.controller)
            return

          try {
            if (location.origin == 'https://www.codetmp7.dev' || location.origin == 'https://codetmp7.dev') {
              registration.unregister().then((success) => {
                // if boolean = true, unregister is successful
                if (success) {
                  pwaCacher.removeUpdate();
                }
              });
            }
          } catch (e) { }

          if (swo.waiting) {
            swo.waiting.postMessage({action: 'skipWaiting'});
            if (typeof(clientUpdateHandler) === 'undefined') {
              
              if (window.confirm('App updated. Reload?'))
                location.href = location.href;
            } else {
              worker = swo;
              clientUpdateHandler(swo);
            }
            return;
          }
          if (swo.installing) {
            swo.installing.addEventListener('statechange', function(e) {
              if (swo.installing.state == 'installed') {
                swo.waiting.postMessage({action: 'skipWaiting'});
                if (typeof(clientUpdateHandler) === 'undefined') {
                  if (window.confirm('App updated. Reload?'))
                    location.href = location.href;
                } else {
                  worker = swo;
                  clientUpdateHandler(swo);
                }
              }
            })
            return;
          }
          swo.addEventListener('updatefound', function() {
            swo.installing.addEventListener('statechange', function(e) {
              if (this.state == 'installed') {
                swo.waiting.postMessage({action: 'skipWaiting'});
                if (typeof(clientUpdateHandler) === 'undefined') {
                  if (window.confirm('App updated. Reload?'))
                    location.href = location.href;
                } else {
                  worker = swo;
                  clientUpdateHandler(swo);
                }
              }
            })
          })
        }).catch(function(e) {
          console.error('Something went wrong.')
        });
      }

      // PWA custom install

      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        showInstallPromotion();
      });

      buttonInstall.addEventListener('click', async () => {
        hideInstallPromotion();
        deferredPrompt.prompt();
        deferredPrompt = null;
      });

      window.addEventListener('appinstalled', () => {
        hideInstallPromotion();
        deferredPrompt = null;
      });

      function showInstallPromotion() {
        buttonInstall.classList.toggle('w3-hide', false);
      }

      function hideInstallPromotion() {
        buttonInstall.classList.toggle('w3-hide', true);
      }

    })();
  </script>
  
  <script src="js/app.js"></script>
  <script src="index.js" type="module"></script>
  <script src="pwa.js"></script>
  
  <script type="module">
    import init, { transform, } from 'https://esm.sh/lightningcss-wasm@1.22.1';
  
    await init();
    
    window.lightingCss = {
      transform,
    };
  </script>

</body>
</html>